<mxfile host="65bd71144e">
    <diagram id="f4FLehKK4fjQ4iUSSwsT" name="基本流程">
        <mxGraphModel dx="1128" dy="822" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="4" value="" style="edgeStyle=none;html=1;fontSize=12;" edge="1" parent="1" source="2" target="3">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="2" value="连接Epson服务器" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="160" y="40" width="200" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="" style="edgeStyle=none;html=1;fontSize=12;" edge="1" parent="1" source="3" target="5">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="Login登录服务器" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="160" y="120" width="200" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="" style="edgeStyle=none;html=1;fontSize=12;" edge="1" parent="1" source="5" target="7">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="Reset清除报警" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="160" y="200" width="200" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="SetMotorsOn打开电机" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="160" y="280" width="200" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="" style="edgeStyle=none;html=1;fontSize=12;" edge="1" parent="1" source="9" target="10">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="Logout登出服务器" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="439" y="120" width="201" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="断开Epson服务器" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="439" y="200" width="201" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="Socket消息正常响应以#开头，错误响应以!开头" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fontSize=12;fontColor=#000000;align=center;strokeColor=#666666;fillColor=#00FF00;" vertex="1" parent="1">
                    <mxGeometry x="160" y="360" width="480" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="18" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=12;" edge="1" parent="1" source="17" target="9">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="SetMotorOff关闭电机" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="439" y="40" width="201" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="19" value="&lt;h1&gt;Move，Go，Jump的区别&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Move：以直线移动到指定的点上&lt;/li&gt;&lt;li&gt;Go：点到点运动&lt;/li&gt;&lt;li&gt;Jump：先运动Z轴，再运动XY，再运动Z轴的点到点运动&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="160" y="440" width="480" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="&lt;h1&gt;消息响应&lt;/h1&gt;&lt;p&gt;由于是以Socket消息的方式进行通讯，当给Epson服务器发送Jump命令后，Epson服务器如果可以正常响应，会立即回复，而非等Jump命令到位后再回复。&lt;/p&gt;&lt;p&gt;因此需要增加一个&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;等待机器人到位的流程&lt;/font&gt;&lt;/b&gt;。&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;" vertex="1" parent="1">
                    <mxGeometry x="160" y="600" width="480" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="23" value="&lt;h1&gt;&lt;font&gt;判断到位流程&lt;/font&gt;&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;font&gt;倒计时10秒，如果倒计时不结束，则一直循环判断&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font&gt;获取当前位置，与目标位置进行XYZR位置的比对，任何一个位置超过0.01则认为还没有到位，直接进入下一次比对&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font&gt;在任何一次循环比较中，如果四个位置的误差都小于0.01，则认为到位了。此时应结束倒计时，并返回true&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font&gt;倒计时10秒结束还没有到位，则返回false&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=#FF8000;" vertex="1" parent="1">
                    <mxGeometry x="160" y="760" width="480" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="24" value="&lt;h1&gt;启动Epson函数&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;相关的手眼标定流程，直接在Epson机器人中完成，需要执行对应的Epson函数&lt;/li&gt;&lt;li&gt;启动函数main使用start,0命令，启动函数main1使用start,1命令。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;" vertex="1" parent="1">
                    <mxGeometry x="160" y="960" width="480" height="120" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="J3dqPTKXEpp_wUgBOvew" name="标定流程">
        <mxGraphModel dx="940" dy="685" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="phwjY739nomvd8Hae1rQ-3" value="&lt;h1&gt;手眼标定&lt;/h1&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;标定分为两个部分&lt;/li&gt;&lt;ol&gt;&lt;li&gt;Epson机械手和J2轴移动相机的标定，该相机用于粗定位抓取&lt;/li&gt;&lt;li&gt;Epson机械手和固定式下相机的标定，该相机用于精定位&lt;/li&gt;&lt;/ol&gt;&lt;li&gt;标定算法使用Epson提供的算法，在Epson机械手中用机器人语言实现，采用建服务器通讯的方式，将视觉和机器人坐标点传入到程序中，然后调用Epson的算法进行标定。&lt;/li&gt;&lt;li&gt;后续与视觉坐标相关的转换，需要将视觉坐标传入Epson机器人中进行转换后再运动&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;" vertex="1" parent="1">
                    <mxGeometry x="40" y="40" width="760" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-7" value="" style="edgeStyle=elbowEdgeStyle;html=1;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;elbow=vertical;" edge="1" parent="1" source="phwjY739nomvd8Hae1rQ-5" target="phwjY739nomvd8Hae1rQ-6">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-5" value="start,1：启动J2轴相机标定函数" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#1ba1e2;strokeColor=#006EAF;fontSize=12;fontColor=#ffffff;" vertex="1" parent="1">
                    <mxGeometry x="80" y="280" width="240" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-9" value="" style="edgeStyle=elbowEdgeStyle;shape=connector;rounded=1;elbow=vertical;html=1;labelBackgroundColor=default;strokeColor=default;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;endArrow=classic;" edge="1" parent="1" source="phwjY739nomvd8Hae1rQ-6" target="phwjY739nomvd8Hae1rQ-8">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-6" value="Epson机器人开启通讯服务器&lt;br&gt;192.168.0.13.6000等待连接" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#e3c800;fontColor=#000000;strokeColor=#B09500;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="280" y="360" width="240" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-11" value="" style="edgeStyle=elbowEdgeStyle;shape=connector;rounded=1;elbow=vertical;html=1;labelBackgroundColor=default;strokeColor=default;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;endArrow=classic;" edge="1" parent="1" source="phwjY739nomvd8Hae1rQ-8" target="phwjY739nomvd8Hae1rQ-10">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-8" value="上位机连接通讯服务器" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="280" y="440" width="240" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-13" value="" style="edgeStyle=elbowEdgeStyle;shape=connector;rounded=1;elbow=vertical;html=1;labelBackgroundColor=default;strokeColor=default;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;endArrow=classic;" edge="1" parent="1" source="phwjY739nomvd8Hae1rQ-10" target="phwjY739nomvd8Hae1rQ-12">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="sCaiPrpFh5ioy8ZWmt36-2" value="" style="edgeStyle=elbowEdgeStyle;shape=connector;rounded=1;elbow=vertical;html=1;labelBackgroundColor=default;strokeColor=default;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;endArrow=classic;" edge="1" parent="1" source="phwjY739nomvd8Hae1rQ-10" target="phwjY739nomvd8Hae1rQ-12">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-10" value="Epson等待上位机发送坐标" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#e3c800;fontColor=#000000;strokeColor=#B09500;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="280" y="520" width="240" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-14" value="循环9次" style="edgeStyle=elbowEdgeStyle;shape=connector;rounded=1;elbow=vertical;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;labelBackgroundColor=default;strokeColor=default;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;endArrow=classic;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="phwjY739nomvd8Hae1rQ-12" target="phwjY739nomvd8Hae1rQ-10">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="560" y="580"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-16" value="" style="edgeStyle=elbowEdgeStyle;shape=connector;rounded=1;elbow=vertical;html=1;labelBackgroundColor=default;strokeColor=default;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;endArrow=classic;" edge="1" parent="1" source="phwjY739nomvd8Hae1rQ-12" target="phwjY739nomvd8Hae1rQ-15">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-12" value="上位机发送坐标" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="280" y="600" width="240" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-18" value="" style="edgeStyle=elbowEdgeStyle;shape=connector;rounded=1;elbow=vertical;html=1;labelBackgroundColor=default;strokeColor=default;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;endArrow=classic;" edge="1" parent="1" source="phwjY739nomvd8Hae1rQ-15" target="phwjY739nomvd8Hae1rQ-17">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-15" value="Epson机器人执行标定算法" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#e3c800;fontColor=#000000;strokeColor=#B09500;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="280" y="680" width="240" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-20" value="" style="edgeStyle=elbowEdgeStyle;shape=connector;rounded=1;elbow=vertical;html=1;labelBackgroundColor=default;strokeColor=default;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;endArrow=classic;" edge="1" parent="1" source="phwjY739nomvd8Hae1rQ-17" target="phwjY739nomvd8Hae1rQ-19">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-17" value="Epson机器人保存标定结果到caa文件" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#e3c800;fontColor=#000000;strokeColor=#B09500;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="280" y="760" width="240" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-22" value="" style="edgeStyle=elbowEdgeStyle;shape=connector;rounded=1;elbow=vertical;html=1;labelBackgroundColor=default;strokeColor=default;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;endArrow=classic;" edge="1" parent="1" source="phwjY739nomvd8Hae1rQ-19" target="phwjY739nomvd8Hae1rQ-21">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-19" value="Epson机器人发送标定结果给上位机" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#e3c800;fontColor=#000000;strokeColor=#B09500;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="280" y="840" width="240" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-21" value="上位机收到标定结果后结束标定流程" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#e3c800;fontColor=#000000;strokeColor=#B09500;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="280" y="920" width="240" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-41" style="edgeStyle=elbowEdgeStyle;shape=connector;rounded=1;elbow=vertical;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;labelBackgroundColor=default;strokeColor=default;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;endArrow=classic;" edge="1" parent="1" source="phwjY739nomvd8Hae1rQ-24" target="phwjY739nomvd8Hae1rQ-6">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="phwjY739nomvd8Hae1rQ-24" value="start,2：启动固定式相机标定函数" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Comic Sans MS;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;fontSize=12;" vertex="1" parent="1">
                    <mxGeometry x="480" y="280" width="240" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="sCaiPrpFh5ioy8ZWmt36-1" value="&lt;h1&gt;旋转标定&lt;/h1&gt;&lt;p&gt;实际测试后发现对于旋转动作的标定，Epson机器人并不能满足上位机需求，因此对于标定结果，只取XY进行计算&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=#FFFFFF;" vertex="1" parent="1">
                    <mxGeometry x="80" y="1000" width="680" height="120" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>